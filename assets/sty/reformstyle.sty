% reformstyle.sty - LaTeX style package for Reform Chinese Culture documents
% Created by extracting common formatting from document preambles

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{assets/sty/reformstyle}[2025/01/15 Reform Chinese Culture Style Package]

% Required packages
\RequirePackage{fontspec}
\RequirePackage[UTF8, fontset=none]{ctex}
\RequirePackage{hyperref}
\RequirePackage{geometry}
\RequirePackage{fancyhdr}
\RequirePackage{titlesec}
\RequirePackage{xcolor}

\RequirePackage{csquotes} % Required for {quotation}
\RequirePackage{ellipsis}[Chicago]
\RequirePackage{setspace} % Reqired for double-spacing
\RequirePackage[english]{babel} % Required for biblatex-chicago

% % Set Chinese fonts for macOS with explicit font settings
% \setCJKmainfont[BoldFont={Songti SC Black}]{Songti SC}
% \setCJKsansfont[BoldFont={PingFang SC Semibold}]{PingFang SC}
% \setCJKmonofont{Heiti SC Medium}

% Page geometry
\geometry{
    letterpaper,
    left=3cm,
    right=3cm,
    top=3cm,
    bottom=3cm
}

% Page style
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[C]{\thepage}

% % Section formatting
% \titleformat{\section}[hang]
% {\Large\bfseries\color{titlecolor}}
% {\thesection.}{0.5em}{}

% \titleformat{\subsection}[hang]
% {\large\bfseries\color{titlecolor}}
% {\thesubsection.}{0.5em}{}

% Hyperlink setup
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue,
    citecolor=blue
}

\newcommand{\subtitle}[1]{\gdef\@subtitle{#1}}
\newcommand{\@subtitle}{}
\renewcommand{\maketitle}{%
    \begin{center}
        {\Huge\bfseries \@title}\\[0.5em]
        {\Huge\bfseries \itshape \@subtitle}\\[0.5em]
        {\large \@author}\\
        {\Large \@date}
    \end{center}
    \vspace{2em}
}

% Preamble environment for introductory text
\newenvironment{preamble}{%
    \begin{itshape}
    \renewcommand{\textit}[1]{\textnormal{##1}}
}{%
    \end{itshape}
    \vspace{2em}
}

% Copy right command
\newcommand{\reformcopyright}[1]{%
    \vspace{2cm}
    \begin{center}
        \textit{Â© #1 Union for Reform Chinese Culture. All rights reserved.}
    \end{center}
}

% Double-spacing for document
\doublespacing
% Single-spacing for bibliography and footnotes
\AtBeginDocument {%
    \@ifpackageloaded{biblatex-chicago}{%
        \renewcommand*{\bibfont}{\singlespacing}
    }{}
}
% Single-spacing for footnotes
\setlength{\footnotesep}{0.5\baselineskip}
\renewcommand{\footnotesize}{\singlespacing}

% End of package
\endinput